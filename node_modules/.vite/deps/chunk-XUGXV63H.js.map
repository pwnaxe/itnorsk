{
  "version": 3,
  "sources": ["../../@smui/ripple/src/Ripple.ts", "../../@smui/ripple/src/index.ts"],
  "sourcesContent": ["import { MDCRippleFoundation, util } from '@material/ripple';\r\nimport { events, ponyfill } from '@material/dom';\r\nimport { getContext } from 'svelte';\r\nimport type { AddLayoutListener, RemoveLayoutListener } from '@smui/common';\r\nconst { applyPassive } = events;\r\nconst { matches } = ponyfill;\r\n\r\nexport type RippleProps = {\r\n  ripple?: boolean;\r\n  surface?: boolean;\r\n  unbounded?: boolean;\r\n  disabled?: boolean;\r\n  color?: 'primary' | 'secondary';\r\n  /** Whether the ripple is active. Leave null to determine automatically. */\r\n  active?: boolean;\r\n  rippleElement?: HTMLElement;\r\n  eventTarget?: HTMLElement;\r\n  activeTarget?: HTMLElement;\r\n  addClass?: (className: string) => void;\r\n  removeClass?: (className: string) => void;\r\n  addStyle?: (name: string, value: string) => void;\r\n  initPromise?: Promise<void>;\r\n};\r\n\r\nexport default function Ripple(\r\n  node: HTMLElement,\r\n  {\r\n    ripple = true,\r\n    surface = false,\r\n    unbounded = false,\r\n    disabled = false,\r\n    color,\r\n    active,\r\n    rippleElement,\r\n    eventTarget,\r\n    activeTarget,\r\n    addClass = (className) => node.classList.add(className),\r\n    removeClass = (className) => node.classList.remove(className),\r\n    addStyle = (name, value) => node.style.setProperty(name, value),\r\n    initPromise = Promise.resolve(),\r\n  }: RippleProps = {},\r\n) {\r\n  let instance: MDCRippleFoundation | undefined;\r\n  let addLayoutListener = getContext<AddLayoutListener | undefined>(\r\n    'SMUI:addLayoutListener',\r\n  );\r\n  let removeLayoutListener: RemoveLayoutListener | undefined;\r\n  let oldActive = active;\r\n  let oldEventTarget = eventTarget;\r\n  let oldActiveTarget = activeTarget;\r\n\r\n  function handleProps() {\r\n    if (surface) {\r\n      addClass('mdc-ripple-surface');\r\n      if (color === 'primary') {\r\n        addClass('smui-ripple-surface--primary');\r\n        removeClass('smui-ripple-surface--secondary');\r\n      } else if (color === 'secondary') {\r\n        removeClass('smui-ripple-surface--primary');\r\n        addClass('smui-ripple-surface--secondary');\r\n      } else {\r\n        removeClass('smui-ripple-surface--primary');\r\n        removeClass('smui-ripple-surface--secondary');\r\n      }\r\n    } else {\r\n      removeClass('mdc-ripple-surface');\r\n      removeClass('smui-ripple-surface--primary');\r\n      removeClass('smui-ripple-surface--secondary');\r\n    }\r\n\r\n    // Handle activation first.\r\n    if (instance && oldActive !== active) {\r\n      oldActive = active;\r\n      if (active) {\r\n        instance.activate();\r\n      } else if (active === false) {\r\n        instance.deactivate();\r\n      }\r\n    }\r\n\r\n    // Then create/destroy an instance.\r\n    if (ripple && !instance) {\r\n      instance = new MDCRippleFoundation({\r\n        addClass,\r\n        browserSupportsCssVars: () => util.supportsCssVariables(window),\r\n        computeBoundingRect: () =>\r\n          (rippleElement || node).getBoundingClientRect(),\r\n        containsEventTarget: (target) => node.contains(target as Node),\r\n        deregisterDocumentInteractionHandler: (evtType, handler) =>\r\n          document.documentElement.removeEventListener(\r\n            evtType,\r\n            handler,\r\n            applyPassive(),\r\n          ),\r\n        deregisterInteractionHandler: (evtType, handler) =>\r\n          (eventTarget || node).removeEventListener(\r\n            evtType,\r\n            handler,\r\n            applyPassive(),\r\n          ),\r\n        deregisterResizeHandler: (handler) =>\r\n          window.removeEventListener('resize', handler),\r\n        getWindowPageOffset: () => ({\r\n          x: window.pageXOffset,\r\n          y: window.pageYOffset,\r\n        }),\r\n        isSurfaceActive: () =>\r\n          active == null ? matches(activeTarget || node, ':active') : active,\r\n        isSurfaceDisabled: () => !!disabled,\r\n        isUnbounded: () => !!unbounded,\r\n        registerDocumentInteractionHandler: (evtType, handler) =>\r\n          document.documentElement.addEventListener(\r\n            evtType,\r\n            handler,\r\n            applyPassive(),\r\n          ),\r\n        registerInteractionHandler: (evtType, handler) =>\r\n          (eventTarget || node).addEventListener(\r\n            evtType,\r\n            handler,\r\n            applyPassive(),\r\n          ),\r\n        registerResizeHandler: (handler) =>\r\n          window.addEventListener('resize', handler),\r\n        removeClass,\r\n        updateCssVariable: addStyle,\r\n      });\r\n\r\n      initPromise.then(() => {\r\n        if (instance) {\r\n          instance.init();\r\n          instance.setUnbounded(unbounded);\r\n        }\r\n      });\r\n    } else if (instance && !ripple) {\r\n      initPromise.then(() => {\r\n        if (instance) {\r\n          instance.destroy();\r\n          instance = undefined;\r\n        }\r\n      });\r\n    }\r\n\r\n    // Now handle event/active targets\r\n    if (\r\n      instance &&\r\n      (oldEventTarget !== eventTarget || oldActiveTarget !== activeTarget)\r\n    ) {\r\n      oldEventTarget = eventTarget;\r\n      oldActiveTarget = activeTarget;\r\n\r\n      instance.destroy();\r\n      requestAnimationFrame(() => {\r\n        if (instance) {\r\n          instance.init();\r\n          instance.setUnbounded(unbounded);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (!ripple && unbounded) {\r\n      addClass('mdc-ripple-upgraded--unbounded');\r\n    }\r\n  }\r\n\r\n  handleProps();\r\n\r\n  if (addLayoutListener) {\r\n    removeLayoutListener = addLayoutListener(layout);\r\n  }\r\n\r\n  function layout() {\r\n    if (instance) {\r\n      instance.layout();\r\n    }\r\n  }\r\n\r\n  return {\r\n    update(props: RippleProps) {\r\n      ({\r\n        ripple,\r\n        surface,\r\n        unbounded,\r\n        disabled,\r\n        color,\r\n        active,\r\n        rippleElement,\r\n        eventTarget,\r\n        activeTarget,\r\n        addClass,\r\n        removeClass,\r\n        addStyle,\r\n        initPromise,\r\n      } = {\r\n        ripple: true,\r\n        surface: false,\r\n        unbounded: false,\r\n        disabled: false,\r\n        color: undefined,\r\n        active: undefined,\r\n        rippleElement: undefined,\r\n        eventTarget: undefined,\r\n        activeTarget: undefined,\r\n        addClass: (className) => node.classList.add(className),\r\n        removeClass: (className) => node.classList.remove(className),\r\n        addStyle: (name, value) => node.style.setProperty(name, value),\r\n        initPromise: Promise.resolve(),\r\n        ...props,\r\n      });\r\n      handleProps();\r\n    },\r\n\r\n    destroy() {\r\n      if (instance) {\r\n        instance.destroy();\r\n        instance = undefined;\r\n        removeClass('mdc-ripple-surface');\r\n        removeClass('smui-ripple-surface--primary');\r\n        removeClass('smui-ripple-surface--secondary');\r\n      }\r\n\r\n      if (removeLayoutListener) {\r\n        removeLayoutListener();\r\n      }\r\n    },\r\n  };\r\n}\r\n", "/// <reference types=\"./ambient-ripple\" />\r\n\r\nexport * from './Ripple.js';\r\nimport Ripple from './Ripple.js';\r\n\r\nexport default Ripple;\r\n"],
  "mappings": "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",
  "names": []
}
